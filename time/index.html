<!-- Attempted clock -->
<div id="main"></div>
<canvas id="clock1"></canvas>
<script src=" moment.js"></script>
<script src="moment-timezone-with-data.js"></script>
<script>
    e = [
        ["India", "in", "Asia/Kolkata"],
        ["New York", "ny", "America/New_York"],
        ["Australia", "au", "Australia/Sydney"],
        ["Greenwich", "utc", "UTC"],
        ["Toronto", "to", "America/Toronto"]
    ]
    function drawOnClock1(canvas, dayseconds) {


        canvas.width = 200
        canvas.height = 200
        radius = canvas.width * 0.4
        const ctx = canvas.getContext("2d");

        ctx.translate(canvas.width / 2, canvas.height / 2);
        ctx.beginPath();
        ctx.arc(0, 0, radius, 0, 2 * Math.PI);
        ctx.lineWidth = 1
        ctx.stroke();
        ctx.closePath();

        ctx.beginPath();
        for (let i = 0; i < 12; i++) {
            ctx.lineWidth = 3
            ctx.moveTo(0, 0)
            ctx.moveTo(0, -radius * 0.925)
            ctx.lineTo(0, -radius)
            ctx.rotate(2 * Math.PI / 12)
        }
        ctx.stroke()
        ctx.closePath();

        ctx.beginPath();
        ctx.lineWidth = 1
        ctx.translate(0, radius * 0.025)
        for (let i = 0; i < 12; i++) {
            t = i ? i : 12
            ctx.font = `${radius / 10}px Arial`
            ctx.fillStyle = 'black'
            ctx.rotate(i * 2 * Math.PI / 12)
            ctx.translate(0, -radius * 0.85)
            ctx.rotate(-i * 2 * Math.PI / 12)
            ctx.fillText(t, (-radius * 0.025) * t.toString().length, 0)
            ctx.rotate(i * 2 * Math.PI / 12)
            ctx.translate(0, radius * 0.85)
            ctx.rotate(-i * 2 * Math.PI / 12)

        }
        ctx.translate(0, -radius * 0.025)
        ctx.closePath();

        for (let i = 0; i < 60; i++) {
            ctx.lineWidth = 1
            ctx.moveTo(0, 0)
            ctx.moveTo(0, -radius * 0.975)
            ctx.lineTo(0, -radius)
            ctx.rotate(2 * Math.PI / 60)
        }
        ctx.stroke()
        ctx.closePath()


        a1 = (dayseconds % (12 * 60 * 60)) * Math.PI * 2 / (12 * 60 * 60)
        a2 = (dayseconds % (60 * 60)) * Math.PI * 2 / (60 * 60)
        a3 = (dayseconds % 60) * Math.PI * 2 / 60
        ctx.lineCap = "round";
        ctx.beginPath();
        ctx.moveTo(0, 0)
        ctx.rotate(a1)
        ctx.lineWidth = 5
        ctx.lineTo(0, -radius / 2)
        ctx.stroke()
        ctx.rotate(-a1)
        ctx.closePath();

        ctx.beginPath();
        ctx.moveTo(0, 0)
        ctx.rotate(a2)
        ctx.lineWidth = 2.5
        ctx.lineTo(0, -radius * 0.7)
        ctx.stroke()
        ctx.rotate(-a2)
        ctx.closePath();

        ctx.beginPath();
        ctx.moveTo(0, 0)
        ctx.rotate(a3)
        ctx.lineWidth = 1
        ctx.lineTo(0, -radius * 0.9)
        ctx.stroke()
        ctx.rotate(-a3)
        ctx.closePath();

    }
    function drawOnClock2(canvas, time) {
        canvas.width = 200
        canvas.height = 200
        hours = time.hours().toString(2).toString()
        hours = "0".repeat(5-hours.length)+hours
        hours = hours.split('').reverse()

        minutes = time.minutes().toString(2).toString()
        minutes = "0".repeat(6-minutes.length)+minutes
        minutes = minutes.split('').reverse()

        seconds = time.seconds().toString(2).toString()
        seconds = "0".repeat(6-seconds.length)+seconds
        seconds = seconds.split('').reverse()
        const ctx = canvas.getContext("2d");
        //hours
        hours.forEach((i, n) => {
            ctx.beginPath()
            ctx.arc(50,175-(25*n),10,0,2*Math.PI)
            ctx.stroke()
            if (Number(i)){
                ctx.fill()
            }
            else ctx.closePath()
        })
        minutes.forEach((i, n) => {
            ctx.beginPath()
            ctx.arc(100,175-(25*n),10,0,2*Math.PI)
            ctx.stroke()
            if (Number(i)){
                ctx.fill()
            }
            else ctx.closePath()
        })
        seconds.forEach((i, n) => {
            ctx.beginPath()
            ctx.arc(150,175-(25*n),10,0,2*Math.PI)
            ctx.stroke()
            if (Number(i)){
                ctx.fill()
            }
            else ctx.closePath()
        })
        
    }
    function makeFields(name, zone) {
        const div = document.createElement("div");
        div.id = name + 'Main'
        const para = document.createElement('p')
        para.id = name + 'Text'
        div.appendChild(para);
        clocksdiv = document.createElement("div")
        clocksdiv.id = name + 'clocks'
        clocksdiv.style.display = "flex"
        const clock1 = document.createElement("canvas")
        clock1.id = name + 'clock1'
        clocksdiv.appendChild(clock1)
        const clock2 = document.createElement("canvas")
        clock2.id = name + 'clock2'
        clocksdiv.appendChild(clock2)
        div.appendChild(clocksdiv);
        document.getElementById("main").appendChild(div)
    }
    e.forEach(i => {
        makeFields(i[1], i[2])
    });
    setInterval(() => {
        e.forEach(i => {
            time = moment().tz(i[2])
            seconds = time.hours() * 3600 + time.minutes() * 60 + time.seconds()
            para = document.getElementById(i[1] + "Text")
            para.innerHTML = `${i[0]}: ${time.format('LTS')}<br />`
            clock1 = document.getElementById(i[1] + "clock1")
            drawOnClock1(clock1, seconds)
            clock2 = document.getElementById(i[1] + "clock2")
            drawOnClock2(clock2, time)
        });
    }, 1000)
</script>
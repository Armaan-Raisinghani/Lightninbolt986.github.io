<!-- Attempted clock -->
<div id="main"></div>
<canvas id="clock1"></canvas>
<script src=" moment.js"></script>
<script src="moment-timezone-with-data.js"></script>
<style>
    @keyframes spin1 {
        100% {
            transform: rotateX(180deg);
        }
    }

    @keyframes idle {
        100% {}
    }
</style>
<script>
    e = [
        ["India", "in", "Asia/Kolkata"],
        ["New York", "ny", "America/New_York"],
        ["Australia", "au", "Australia/Sydney"],
        ["Greenwich", "utc", "UTC"],
        ["Toronto", "to", "America/Toronto"]
    ]
    function drawOnClock1(canvas, dayseconds) {

        canvas.width = 200
        canvas.height = 200
        radius = canvas.width * 0.4
        const ctx = canvas.getContext("2d");

        ctx.translate(canvas.width / 2, canvas.height / 2);
        ctx.beginPath();
        ctx.arc(0, 0, radius, 0, 2 * Math.PI);
        ctx.lineWidth = 1
        ctx.stroke();
        ctx.closePath();

        ctx.beginPath();
        for (let i = 0; i < 12; i++) {
            ctx.lineWidth = 3
            ctx.moveTo(0, 0)
            ctx.moveTo(0, -radius * 0.925)
            ctx.lineTo(0, -radius)
            ctx.rotate(2 * Math.PI / 12)
        }
        ctx.stroke()
        ctx.closePath();

        ctx.beginPath();
        ctx.lineWidth = 1
        ctx.translate(0, radius * 0.025)
        for (let i = 0; i < 12; i++) {
            t = i ? i : 12
            ctx.font = `${radius / 10}px Arial`
            ctx.fillStyle = 'black'
            ctx.rotate(i * 2 * Math.PI / 12)
            ctx.translate(0, -radius * 0.85)
            ctx.rotate(-i * 2 * Math.PI / 12)
            ctx.fillText(t, (-radius * 0.025) * t.toString().length, 0)
            ctx.rotate(i * 2 * Math.PI / 12)
            ctx.translate(0, radius * 0.85)
            ctx.rotate(-i * 2 * Math.PI / 12)

        }
        ctx.translate(0, -radius * 0.025)
        ctx.closePath();

        for (let i = 0; i < 60; i++) {
            ctx.lineWidth = 1
            ctx.moveTo(0, 0)
            ctx.moveTo(0, -radius * 0.975)
            ctx.lineTo(0, -radius)
            ctx.rotate(2 * Math.PI / 60)
        }
        ctx.stroke()
        ctx.closePath()


        a1 = (dayseconds % (12 * 60 * 60)) * Math.PI * 2 / (12 * 60 * 60)
        a2 = (dayseconds % (60 * 60)) * Math.PI * 2 / (60 * 60)
        a3 = (dayseconds % 60) * Math.PI * 2 / 60
        ctx.lineCap = "round";
        ctx.beginPath();
        ctx.moveTo(0, 0)
        ctx.rotate(a1)
        ctx.lineWidth = 5
        ctx.lineTo(0, -radius / 2)
        ctx.stroke()
        ctx.rotate(-a1)
        ctx.closePath();

        ctx.beginPath();
        ctx.moveTo(0, 0)
        ctx.rotate(a2)
        ctx.lineWidth = 2.5
        ctx.lineTo(0, -radius * 0.7)
        ctx.stroke()
        ctx.rotate(-a2)
        ctx.closePath();

        ctx.beginPath();
        ctx.moveTo(0, 0)
        ctx.rotate(a3)
        ctx.lineWidth = 1
        ctx.lineTo(0, -radius * 0.9)
        ctx.stroke()
        ctx.rotate(-a3)
        ctx.closePath();

    }
    function drawOnClock2(canvas, time) {
        canvas.width = 200
        canvas.height = 200
        hours = time.hours().toString(2).toString()
        hours = "0".repeat(5 - hours.length) + hours
        hours = hours.split('').reverse()

        minutes = time.minutes().toString(2).toString()
        minutes = "0".repeat(6 - minutes.length) + minutes
        minutes = minutes.split('').reverse()

        seconds = time.seconds().toString(2).toString()
        seconds = "0".repeat(6 - seconds.length) + seconds
        seconds = seconds.split('').reverse()
        const ctx = canvas.getContext("2d");
        //hours
        ctx.lineWidth = 1
        hours.forEach((i, n) => {
            ctx.beginPath()
            ctx.arc(50, 175 - (25 * n), 10, 0, 2 * Math.PI)
            ctx.stroke()
            if (Number(i)) {
                ctx.fill()
            }
            else ctx.closePath()

            ctx.font = `15px Arial`
            ctx.fillText('H', 45, 200)
        })
        minutes.forEach((i, n) => {
            ctx.beginPath()
            ctx.arc(100, 175 - (25 * n), 10, 0, 2 * Math.PI)
            ctx.stroke()
            if (Number(i)) {
                ctx.fill()
            }
            else ctx.closePath()

            ctx.font = `15px Arial`
            ctx.fillText('M', 95, 200)
        })
        seconds.forEach((i, n) => {
            ctx.beginPath()
            ctx.arc(150, 175 - (25 * n), 10, 0, 2 * Math.PI)
            ctx.stroke()
            if (Number(i)) {
                ctx.fill()
            }
            else ctx.closePath()

            ctx.font = `15px Arial`
            ctx.fillText('S', 145, 200)
        })

    }
    function drawOnClock3_1(canvas, dayseconds) {
        document.getElementById(canvas.id).style.animation = "";
        document.getElementById(canvas.id).style.animationFillMode = "";
        canvas.width = 75
        canvas.height = 200
        ctx = canvas.getContext('2d')
        hourseconds = dayseconds % 3600
        minseconds = dayseconds % 60
        if (dayseconds == 3600 * 24 - 1) {
            document.getElementById(canvas.id).style.animation = "spin1 1s";
            document.getElementById(canvas.id).style.animationFillMode = "forwards";
        }
        ctx.translate(-12.5, 0)
        ctx.beginPath()
        ctx.moveTo(25, 25)
        ctx.lineTo(25, 85)
        ctx.lineTo(49, 100)
        ctx.lineTo(25, 115)
        ctx.lineTo(25, 175)
        ctx.lineTo(75, 175)
        ctx.lineTo(75, 115)
        ctx.lineTo(51, 100)
        ctx.lineTo(75, 85)
        ctx.lineTo(75, 25)
        ctx.lineTo(25, 25)
        ctx.stroke()
        ctx.closePath()

        ctx.font = `bold 15px Arial`
        /*        ctx.fillText('H', 45, 200) */
        y = 75 * dayseconds / (3600 * 24) + 25
        if (y > 85) {
            ltx = (y - 85) * (5) / (3) + 25
            rtx = -(y - 85) * (5) / (3) + 75
            ctx.beginPath()
            ctx.moveTo(50, 100)
            ctx.lineTo(ltx, y)
            ctx.lineTo(rtx, y)
            ctx.lineTo(50, 100)
            ctx.fill()
        } else {
            ctx.beginPath()
            ctx.moveTo(50, 100)
            ctx.lineTo(25, 85)
            ctx.lineTo(25, y)
            ctx.lineTo(75, y)
            ctx.lineTo(75, 85)
            ctx.lineTo(50, 100)
            ctx.fill()
        }
        y = 200 - (75 * dayseconds / (3600 * 24) + 25)
        if (y < 115) {
            lbx = ((y - 115) * (-5) / (3) + 25)
            rbx = ((y - 115) * (5) / (3) + 75)
            ctx.beginPath()
            ctx.moveTo(25, 175)
            ctx.lineTo(25, 115)
            ctx.lineTo(lbx, y)
            ctx.lineTo(rbx, y)
            ctx.lineTo(75, 115)
            ctx.lineTo(75, 175)
            ctx.lineTo(25, 175)
            ctx.fill()
        } else {
            ctx.beginPath()
            ctx.moveTo(25, 175)
            ctx.lineTo(25, y)
            ctx.lineTo(75, y)
            ctx.lineTo(75, 175)
            ctx.lineTo(25, 175)
            ctx.fill()
        }
        ctx.beginPath()
        ctx.moveTo(50, 100)
        ctx.lineTo(50, 175)
        ctx.stroke()
        ctx.closePath()

    }
    function drawOnClock3_2(canvas, dayseconds) {
        canvas.width = 75
        canvas.height = 200
        ctx = canvas.getContext('2d')
        hourseconds = dayseconds % 3600
        minseconds = dayseconds % 60
        if (hourseconds == 3599) {
            document.getElementById(canvas.id).style.animation = "spin1 1s";
            document.getElementById(canvas.id).style.animationFillMode = "forwards";
        }
        ctx.translate(-12.5, 0)
        ctx.beginPath()
        ctx.moveTo(25, 25)
        ctx.lineTo(25, 85)
        ctx.lineTo(49, 100)
        ctx.lineTo(25, 115)
        ctx.lineTo(25, 175)
        ctx.lineTo(75, 175)
        ctx.lineTo(75, 115)
        ctx.lineTo(51, 100)
        ctx.lineTo(75, 85)
        ctx.lineTo(75, 25)
        ctx.lineTo(25, 25)
        ctx.stroke()
        ctx.closePath()
        ctx.font = `bold 15px Arial`
        /*       ctx.fillText('M', 45, 200) */
        //create lines equations
        y = 75 * hourseconds / 3600 + 25
        if (y > 85) {
            ltx = (y - 85) * (5) / (3) + 25
            rtx = -(y - 85) * (5) / (3) + 75
            ctx.beginPath()
            ctx.moveTo(50, 100)
            ctx.lineTo(ltx, y)
            ctx.lineTo(rtx, y)
            ctx.lineTo(50, 100)
            ctx.fill()
        }
        else {
            ctx.beginPath()
            ctx.moveTo(50, 100)
            ctx.lineTo(25, 85)
            ctx.lineTo(25, y)
            ctx.lineTo(75, y)
            ctx.lineTo(75, 85)
            ctx.lineTo(50, 100)
            ctx.fill()
        }
        y = 200 - (75 * hourseconds / 3600 + 25)
        if (y < 115) {
            lbx = ((y - 115) * (-5) / (3) + 25)
            rbx = ((y - 115) * (5) / (3) + 75)
            ctx.beginPath()
            ctx.moveTo(25, 175)
            ctx.lineTo(25, 115)
            ctx.lineTo(lbx, y)
            ctx.lineTo(rbx, y)
            ctx.lineTo(75, 115)
            ctx.lineTo(75, 175)
            ctx.lineTo(25, 175)
            ctx.fill()
        } else {
            ctx.beginPath()
            ctx.moveTo(25, 175)
            ctx.lineTo(25, y)
            ctx.lineTo(75, y)
            ctx.lineTo(75, 175)
            ctx.lineTo(25, 175)
            ctx.fill()
        }
        ctx.beginPath()
        ctx.moveTo(50, 100)
        ctx.lineTo(50, 175)
        ctx.stroke()
        ctx.closePath()
    }
    function drawOnClock3_3(canvas, dayseconds) {

        document.getElementById(canvas.id).style.animation = "";
        document.getElementById(canvas.id).style.animationFillMode = "";
        canvas.width = 75
        canvas.height = 200
        ctx = canvas.getContext('2d')
        hourseconds = dayseconds % 3600
        minseconds = dayseconds % 60
        ctx.translate(-12.5, 0)
        if (minseconds == 59) {
            document.getElementById(canvas.id).style.animation = "spin1 1s";
            document.getElementById(canvas.id).style.animationFillMode = "forwards";
        }
        ctx.beginPath()
        ctx.moveTo(25, 25)
        ctx.lineTo(25, 85)
        ctx.lineTo(49, 100)
        ctx.lineTo(25, 115)
        ctx.lineTo(25, 175)
        ctx.lineTo(75, 175)
        ctx.lineTo(75, 115)
        ctx.lineTo(51, 100)
        ctx.lineTo(75, 85)
        ctx.lineTo(75, 25)
        ctx.lineTo(25, 25)
        ctx.stroke()
        ctx.closePath()
        ctx.font = `bold 15px Arial`
        /*  ctx.fillText('S', 45, 200) */
        //create lines equations
        y = 75 * minseconds / 60 + 25
        if (y > 85) {
            ltx = (y - 85) * (5) / (3) + 25
            rtx = -(y - 85) * (5) / (3) + 75
            ctx.beginPath()
            ctx.moveTo(50, 100)
            ctx.lineTo(ltx, y)
            ctx.lineTo(rtx, y)
            ctx.lineTo(50, 100)
            ctx.fill()
        }
        else {
            ctx.beginPath()
            ctx.moveTo(50, 100)
            ctx.lineTo(25, 85)
            ctx.lineTo(25, y)
            ctx.lineTo(75, y)
            ctx.lineTo(75, 85)
            ctx.lineTo(50, 100)
            ctx.fill()
        }
        y = 200 - (75 * minseconds / (60) + 25)
        if (y < 115) {
            lbx = ((y - 115) * (-5) / (3) + 25)
            rbx = ((y - 115) * (5) / (3) + 75)
            ctx.beginPath()
            ctx.moveTo(25, 175)
            ctx.lineTo(25, 115)
            ctx.lineTo(lbx, y)
            ctx.lineTo(rbx, y)
            ctx.lineTo(75, 115)
            ctx.lineTo(75, 175)
            ctx.lineTo(25, 175)
            ctx.fill()
        } else {
            ctx.beginPath()
            ctx.moveTo(25, 175)
            ctx.lineTo(25, y)
            ctx.lineTo(75, y)
            ctx.lineTo(75, 175)
            ctx.lineTo(25, 175)
            ctx.fill()
        }
        ctx.beginPath()
        ctx.moveTo(50, 100)
        ctx.lineTo(50, 175)
        ctx.stroke()
        ctx.closePath()
    }
    function makeFields(name, zone) {
        const div = document.createElement("div");
        div.id = name + 'Main'
        const para = document.createElement('p')
        para.id = name + 'Text'
        div.appendChild(para);
        clocksdiv = document.createElement("div")
        clocksdiv.id = name + 'clocks'
        clocksdiv.style.display = "flex"
        const clock1 = document.createElement("canvas")
        clock1.id = name + 'clock1'
        clocksdiv.appendChild(clock1)
        const clock2 = document.createElement("canvas")
        clock2.id = name + 'clock2'
        clocksdiv.appendChild(clock2)
        const clock3 = document.createElement("div")
        clock3.id = name + 'clock3'
        clocksdiv.appendChild(clock3)
        const clock3_1 = document.createElement("canvas")
        clock3_1.id = name + 'clock3_1'
        clock3.appendChild(clock3_1)
        const clock3_2 = document.createElement("canvas")
        clock3_2.id = name + 'clock3_2'
        clock3.appendChild(clock3_2)
        const clock3_3 = document.createElement("canvas")
        clock3_3.id = name + 'clock3_3'
        clock3.appendChild(clock3_3)
        clocksdiv.appendChild(clock3)
        div.appendChild(clocksdiv);
        document.getElementById("main").appendChild(div)
    }
    e.forEach(i => {
        makeFields(i[1], i[2])
    });
    setInterval(() => {
        e.forEach(i => {
            time = moment().tz(i[2])
            const seconds = time.hours() * 3600 + time.minutes() * 60 + time.seconds()
            para = document.getElementById(i[1] + "Text")
            para.innerHTML = `${i[0]}: ${time.format('LTS')}<br />`
            clock1 = document.getElementById(i[1] + "clock1")
            drawOnClock1(clock1, seconds)
            clock2 = document.getElementById(i[1] + "clock2")
            drawOnClock2(clock2, time)
            clock3_1 = document.getElementById(i[1] + "clock3_1")
            drawOnClock3_1(clock3_1, seconds)
            clock3_2 = document.getElementById(i[1] + "clock3_2")
            drawOnClock3_2(clock3_2, seconds)
            clock3_3 = document.getElementById(i[1] + "clock3_3")
            drawOnClock3_3(clock3_3, seconds)
        });

    }, 1000)
</script>